---
title: Visualizaci√≥n Interactiva de Indicadores Econ√≥micos y Sociales Globales con
  R Shiny
author: "**Autores:**  \n- Denis Yanin Ulloa de la Cruz  \n- Juan Admeht Yauli Mina
  \ \n- Miguel Saraya Villar  \n- Jes√∫s Oma Vilca Sangay  \n"
date: "`r Sys.Date()`"
output:
  html_document:
    df_print: paged
  toc: true
  toc_depth: 2
  number_sections: true
  reference_docx: default
  word_document: null
documentclass: article
subtitle: "Curso: Herramientas Inform√°ticas - Maestr√≠a en Econom√≠a con Menci√≥n en
  Data Analytics"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Presentaci√≥n

Este informe presenta el desarrollo e implementaci√≥n de un tablero interactivo en R Shiny, basado en los indicadores del desarrollo econ√≥mico y social proporcionados por el Banco Mundial (WDI), complementado con criterios visuales de Gapminder.

El trabajo se enmarca dentro del curso de Herramientas Inform√°ticas de la Maestr√≠a en Econom√≠a con menci√≥n en Data Analytics , y busca fortalecer la capacidad de an√°lisis visual interactivo para la toma de decisiones fundamentadas en evidencia emp√≠rica.


## üéØ Objetivo

Dise√±ar e implementar un tablero interactivo que permita explorar indicadores clave del desarrollo global, facilitando comparaciones entre pa√≠ses, regiones y a√±os, utilizando datos oficiales del Banco Mundial.


## üß™ Metodolog√≠a

Idioma y entorno: R (versi√≥n 4.2+) y RStudio.
Estructura: Shiny
Datos: Descargados v√≠a API con el paquete WDI.
Visualizaci√≥n: Utilizando plotly, shinydashboard, y DT.

## üîß Limpieza y procesamiento

Eliminaci√≥n de valores faltantes ( NA).
Estandarizaci√≥n de nombres de variables.
Asignaci√≥n de continentes con el paquete countrycode.
Transformaciones con dplyry tidyr.

## Repositorio: 
https://github.com/DeniseUlloa/dashboard-wdi-indicadores-globales

## Dashboard: 

https://denisulloa.shinyapps.io/PROYECTO0306/


\newpage

## Base de datos

Los datos provienen principalmente de:

üìò Banco Mundial ‚Äì Indicadores de Desarrollo Mundial (WDI): https://data.worldbank.org/indicator

üìò Gapminder: https://www.gapminder.org/data/

Se prioriz√≥ la base de datos WDI por su actualizaci√≥n oficial, mayor trazabilidad y posibilidad de automatizar la extracci√≥n con el paquete WDI.


## üåü Bondades del Proyecto
Acceso a datos actualizados v√≠a API.
Visualizaci√≥n din√°mica por a√±o y categor√≠a.
Exportaci√≥n directa de tablas filtradas.
Reproducibilidad completa del an√°lisis.

## ‚ö†Ô∏è Limitaciones
Algunos indicadores tienen valores faltantes en pa√≠ses espec√≠ficos.
No se aplicar√°n imputaciones ni modelos predictivos.

## üìä  Indicadores y Categor√≠as 
Los principales indicadores utilizados incluyen:

- Econom√≠a	(PIB per c√°pita, ingreso nacional, inflaci√≥n)	
- Educaci√≥n	(Escolaridad promedio, alfabetizaci√≥n	a√±os)
- Salud	(Esperanza de vida, mortalidad infantil)
- Demograf√≠a	(Poblaci√≥n total, natalidad, mortalidad	personas)
- Trabajo	(Empleo total, desempleo, pobreza extrema)
- Medio ambiente y seguridad	(Superficie boscosa, gasto militar)

\newpage

## üì¶ C√≥digo Completo del Proyecto Shiny

```{r shiny_app, eval=FALSE}
shinyApp(ui, server)

# Librer√≠as
library(shiny)
library(dplyr)
library(WDI)
library(plotly)
library(countrycode)
library(shinydashboard)
library(DT)
library(tidyr)
library(rlang)

# Carga de datos
indicadores <- c("pib", "esperanza_vida", "poblacion", "gasto_educacion", "ingreso", "pib_total",
                 "ingreso_nacional_bruto", "inflacion", "escolaridad", "alfabetizacion", "matricula_primaria",
                 "gasto_salud", "mortalidad_infantil", "vacunacion_dpt", "fertilidad", "natalidad",
                 "mortalidad", "pobreza", "desempleo", "empleo_total", "bosques", "gasto_militar")

# Mapeo de c√≥digos del Banco Mundial
indicadores_wdi <- c(
  pib = "NY.GDP.PCAP.CD", ingreso = "NY.GNP.PCAP.CD", pib_total = "NY.GDP.MKTP.CD",
  ingreso_nacional_bruto = "NY.GNP.MKTP.CD", inflacion = "FP.CPI.TOTL.ZG", escolaridad = "BAR.SCHL.15UP",
  gasto_educacion = "SE.XPD.TOTL.GD.ZS", alfabetizacion = "SE.ADT.LITR.ZS", matricula_primaria = "SE.PRM.NENR",
  gasto_salud = "SH.XPD.CHEX.GD.ZS", mortalidad_infantil = "SH.DYN.MORT", vacunacion_dpt = "SH.IMM.IDPT",
  esperanza_vida = "SP.DYN.LE00.IN", fertilidad = "SP.DYN.TFRT.IN", natalidad = "SP.DYN.CBRT.IN",
  mortalidad = "SP.DYN.CDRT.IN", poblacion = "SP.POP.TOTL", pobreza = "SI.POV.DDAY",
  desempleo = "SL.UEM.TOTL.ZS", empleo_total = "SL.EMP.TOTL.SP.ZS", bosques = "AG.LND.FRST.ZS",
  gasto_militar = "MS.MIL.XPND.GD.ZS"
)

# Descarga y preparaci√≥n
wdi_data <- WDI(country = "all", indicator = indicadores_wdi, start = 1982, end = 2022)
wdi_data$continente <- countrycode(wdi_data$iso3c, origin = "iso3c", destination = "continent")
wdi_data <- wdi_data %>% filter(!is.na(continente), !is.na(year))
names(wdi_data) <- gsub(".*\\.", "", names(wdi_data))

# Diccionario para mostrar nombres legibles
titulos_legibles <- list(
  pib = "PIB per c√°pita (USD)", ingreso = "Ingreso per c√°pita (USD)", pib_total = "PIB total (USD)",
  ingreso_nacional_bruto = "Ingreso nacional bruto (USD)", inflacion = "Inflaci√≥n (%)",
  escolaridad = "Escolaridad (a√±os)", gasto_educacion = "Gasto en educaci√≥n (% PBI)",
  alfabetizacion = "Alfabetizaci√≥n (%)", matricula_primaria = "Matr√≠cula primaria (%)",
  gasto_salud = "Gasto en salud (% PBI)", mortalidad_infantil = "Mortalidad infantil (por mil)",
  vacunacion_dpt = "Vacunaci√≥n DPT (%)", esperanza_vida = "Esperanza de vida (a√±os)",
  fertilidad = "Tasa de fertilidad", natalidad = "Natalidad (por mil)", mortalidad = "Mortalidad (por mil)",
  poblacion = "Poblaci√≥n total", pobreza = "Pobreza extrema (%)", desempleo = "Desempleo (%)",
  empleo_total = "Empleo total (%)", bosques = "Superficie boscosa (%)", gasto_militar = "Gasto militar (% PBI)"
)

# UI del dashboard
ui <- dashboardPage(
  dashboardHeader(title = "Indicadores Globales"),
  dashboardSidebar(
    sidebarMenu(
      menuItem("Mapa Mundial", tabName = "mapa", icon = icon("globe")),
      menuItem("Comparar Pa√≠ses", tabName = "comparar", icon = icon("balance-scale")),
      menuItem("Top Rankings", tabName = "ranking", icon = icon("bar-chart"))
    )
  ),
  dashboardBody(
    tabItems(
      tabItem(tabName = "mapa",
              selectInput("indicador", "Seleccione un indicador:", choices = indicadores),
              sliderInput("anio", "Seleccione un a√±o:", min = 1982, max = 2022, value = 2020, sep = ""),
              plotlyOutput("mapa_plot")
      ),
      tabItem(tabName = "comparar",
              selectInput("indicador_x", "Indicador Eje X:", choices = indicadores),
              selectInput("indicador_y", "Indicador Eje Y:", choices = indicadores),
              sliderInput("anio2", "A√±o:", min = 1982, max = 2022, value = 2020, sep = ""),
              plotlyOutput("scatter_plot")
      ),
      tabItem(tabName = "ranking",
              selectInput("indicador_rank", "Indicador a ordenar:", choices = indicadores),
              sliderInput("anio3", "A√±o:", min = 1982, max = 2022, value = 2020, sep = ""),
              plotlyOutput("ranking_plot")
      )
    )
  )
)

# Server del dashboard
server <- function(input, output) {

  output$mapa_plot <- renderPlotly({
    df <- wdi_data %>% filter(year == input$anio)
    plot_ly(df, type = "choropleth", locations = ~iso2c,
            z = ~get(input$indicador), text = ~country,
            colorscale = "Blues") %>%
      layout(title = titulos_legibles[[input$indicador]])
  })

  output$scatter_plot <- renderPlotly({
    df <- wdi_data %>% filter(year == input$anio2)
    plot_ly(df, x = ~get(input$indicador_x), y = ~get(input$indicador_y),
            text = ~country, color = ~continente, size = ~poblacion,
            type = "scatter", mode = "markers") %>%
      layout(title = paste(titulos_legibles[[input$indicador_y]], "vs", titulos_legibles[[input$indicador_x]]),
             xaxis = list(title = titulos_legibles[[input$indicador_x]]),
             yaxis = list(title = titulos_legibles[[input$indicador_y]]))
  })

  output$ranking_plot <- renderPlotly({
    df <- wdi_data %>% filter(year == input$anio3) %>%
      arrange(desc(get(input$indicador_rank))) %>% head(15)
    plot_ly(df, x = ~get(input$indicador_rank), y = ~reorder(country, get(input$indicador_rank)),
            type = "bar", orientation = "h") %>%
      layout(title = paste("Top 15 pa√≠ses en", titulos_legibles[[input$indicador_rank]]),
             xaxis = list(title = titulos_legibles[[input$indicador_rank]]),
             yaxis = list(title = "Pa√≠s"))
  })
}

# Ejecutar app
shinyApp(ui, server)
```

\newpage

## üåê Enlace al Proyecto en Producci√≥n
 https://denisulloa.shinyapps.io/PROYECTO0306/

## üó∫Ô∏è  Panel 1: Mapa Mundial por Categor√≠as
Este panel permite visualizar mapas geoespaciales animados por a√±o, agrupando los indicadores por categor√≠as como econom√≠a, salud, educaci√≥n, demograf√≠a, trabajo y medio ambiente.



```{r img_portada, echo=FALSE}
knitr::include_graphics("img/Portada.png")
```



```{r load_libraries, include=FALSE}
library(dplyr)
library(plotly)
library(WDI)
library(countrycode)
```


```{r cargar_datos, message=FALSE, warning=FALSE}
library(WDI)
library(dplyr)
library(countrycode)

# Descargar datos desde WDI
datos <- WDI(
  country = "all",
  indicator = c("NY.GDP.PCAP.CD"),
  start = 2022,
  end = 2022
)

# Asignar continentes y limpiar datos
datos <- datos %>%
  mutate(continente = countrycode(iso3c, origin = "iso3c", destination = "continent")) %>%
  filter(!is.na(NY.GDP.PCAP.CD), !is.na(iso3c))
```

\newpage

### üîπ C√≥digo de un mapa representativo

```{r mapa_mundial_pib, echo=TRUE, eval=TRUE, warning=FALSE, message=FALSE}
datos_2022 <- datos %>%
  filter(year == 2022, !is.na(NY.GDP.PCAP.CD))

plot_geo(datos_2022) %>%
  add_trace(
    z = ~NY.GDP.PCAP.CD,
    color = ~NY.GDP.PCAP.CD,
    colors = "Blues",
    text = ~paste(country, "<br>PIB per c√°pita:", round(NY.GDP.PCAP.CD, 2)),
    locations = ~iso3c,
    locationmode = "ISO-3",
    colorbar = list(title = "PIB per c√°pita (USD)")
  ) %>%
  layout(
    title = "üìç Mapa de PIB per c√°pita - A√±o 2022",
    geo = list(showframe = FALSE, showcoastlines = FALSE)
  )

```

\newpage

## üìà 2. An√°lisis por pa√≠s
Este panel permite filtrar por pa√≠s y rango de a√±os , mostrando:
Serie de tiempo de cada indicador.
Comparaci√≥n natalidad vs mortalidad.
Relaci√≥n entre PIB y esperanza de vida.
Relaci√≥n entre pobreza extrema y mortalidad.


```{r img_analisis_pais, echo=FALSE}
knitr::include_graphics("img/Analisis paises.png")
```
\newpage

## ‚öñÔ∏è 3. Comparaci√≥n entre Pa√≠ses
Compara dos pa√≠ses seleccionados por el usuario, visualizando gr√°ficos por:

- Econom√≠a
- Educaci√≥n
- Salud
- Demograf√≠a
- Trabajo y seguridad
- Medio ambiente


```{r img_comparar_paises, echo=FALSE}
knitr::include_graphics("img/Comparar paises.PNG")
```
\newpage

## üåé 4. Indicadores por Regi√≥n
Visualizaci√≥n de gr√°ficos de burbujas animadas , donde cada burbuja representa un pa√≠s y el tama√±o es proporcional a la poblaci√≥n. Permite explorar correlaciones:

- PIB vs esperanza de vida
- Escolaridad vs PIB
- Alfabetizaci√≥n vs mortalidad infantil
- Desempleo vs pobreza
- Gasto en salud vs esperanza de vida


```{r img_region_burbujas, echo=FALSE}
knitr::include_graphics("img/Indicadores region.PNG")
```

\newpage

## üìä 5. Explorador de datos
Este panel permite:

- Seleccione un pa√≠s y m√∫ltiples indicadores.
- Visualizar datos tabulados.
- Descargar el conjunto de datos filtrado en .csv.

```{r img_exportar_tabla, echo=FALSE}
knitr::include_graphics("img/Exportar.PNG")
```

\newpage

## üìÅ Repositorio del Proyecto
üîó https://github.com/DeniseUlloa/dashboard-wdi-indicadores-globales





## üìö Referencias Bibliogr√°ficas

- Banco Mundial. (2024). *World Development Indicators (WDI)*. Recuperado de [https://data.worldbank.org/indicator](https://data.worldbank.org/indicator)

- Gapminder Foundation. (2023). *Gapminder Tools & Data*. Recuperado de [https://www.gapminder.org/data/](https://www.gapminder.org/data/)

- Chang, W. (2021). *Shiny: Web Application Framework for R*. RStudio. Disponible en [https://shiny.rstudio.com](https://shiny.rstudio.com)

- Wickham, H., & Grolemund, G. (2017). *R for Data Science*. O‚ÄôReilly Media. [https://r4ds.had.co.nz](https://r4ds.had.co.nz)

- Sievert, C. (2020). *Interactive Web-Based Data Visualization with R, plotly, and shiny*. Chapman and Hall/CRC. [https://plotly-r.com](https://plotly-r.com)

- R Core Team. (2024). *R: A Language and Environment for Statistical Computing*. R Foundation for Statistical Computing. [https://www.r-project.org/](https://www.r-project.org/)

- World Bank API (2024). *WDI R Package API documentation*. [https://github.com/vincentarelbundock/WDI](https://github.com/vincentarelbundock/WDI)


